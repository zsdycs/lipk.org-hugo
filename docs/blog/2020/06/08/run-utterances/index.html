<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  
  <title>æ‰§æ‰‹å¯¹å½±æˆåŒ - è¿è¡Œ Utterances çš„è¯¦ç»†æ•™ç¨‹</title>
  
  <meta name="baidu-site-verification" content="NhzrvyU0CD" />
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-154705931-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-154705931-1');
  </script>

  
  <meta property="og:title" content="æ‰§æ‰‹å¯¹å½±æˆåŒ - è¿è¡Œ Utterances çš„è¯¦ç»†æ•™ç¨‹">
  
  <meta property="og:type" content="website">
  <meta name="keywords" content="ä¸ªäººç½‘ç«™,åšå®¢">
  <script>
      console.info("\n%c ğŸ‰ Hi~ æƒ³çœ‹æºä»£ç ï¼Ÿ %c by zsdycs %c \nGitHubä»“åº“: https://github.com/zsdycs/lipk.org \n%cè‡ªä¸»%cã€%cè·¨ç•Œ%cã€%cç»ˆèº«å­¦ä¹ %cã€‚",
      "color: #fff; padding: 5px 0; background: #29c75f; margin: 1em 0;",
      "padding: 5px 0; background: #666666; margin: 1em 0;",
      "display: block;margin-left: 0.5em; margin: 1em 0;",
      "color:#E24432; font-size: 16px; margin: 1em 0;",
      "color:#666666; font-size: 16px; margin: 1em 0;",
      "color:#0E70ED; font-size: 16px; margin: 1em 0;",
      "color:#666666; font-size: 16px; margin: 1em 0;",
      "color:#009E5E; font-size: 16px; margin: 1em 0;",
      "color:#666666; font-size: 16px; margin: 1em 0;");
  </script>
  
  
  

  
  
  <meta property="description" content="åº” @aixiu éœ€è¦æœ¬æ•™ç¨‹ï¼Œæœ¬æ–‡å°†ä» Utterances æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼›å¦‚ä½•åœ¨æœ¬åœ°åŠç”Ÿäº§ç¯å¢ƒè¿è¡Œï¼›èº«ä»½æˆæƒ oauth ä»£ç é…ç½®åŠè¿è¡Œã€‚ è¿™ 3 ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚åŒç†ï¼Œæœ¬æ–‡é€‚ç”¨äº Beaudar(è¡¨è¾¾)
[&amp;hellip;] Utterancesï¼ˆä¸‹é¢ç®€ç§°â€œUTâ€ï¼‰æœ‰ä¸¤ä»½ä»£ç ï¼Œä¸€ä»½æ˜¯æä¾› client.js çš„å‰ç«¯ä»£ç ï¼Œä¸€ä»½æ˜¯ç”¨äºèº«ä»½æˆæƒçš„â€œåç«¯â€ä»£ç ã€‚
æˆ‘ä»¬çŸ¥é“ UT æ˜¯è¿™æ ·ä½¿ç”¨çš„ï¼š &amp;hellip;">
  <meta property="og:description" content="åº” @aixiu éœ€è¦æœ¬æ•™ç¨‹ï¼Œæœ¬æ–‡å°†ä» Utterances æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼›å¦‚ä½•åœ¨æœ¬åœ°åŠç”Ÿäº§ç¯å¢ƒè¿è¡Œï¼›èº«ä»½æˆæƒ oauth ä»£ç é…ç½®åŠè¿è¡Œã€‚ è¿™ 3 ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚åŒç†ï¼Œæœ¬æ–‡é€‚ç”¨äº Beaudar(è¡¨è¾¾)
[&amp;hellip;] Utterancesï¼ˆä¸‹é¢ç®€ç§°â€œUTâ€ï¼‰æœ‰ä¸¤ä»½ä»£ç ï¼Œä¸€ä»½æ˜¯æä¾› client.js çš„å‰ç«¯ä»£ç ï¼Œä¸€ä»½æ˜¯ç”¨äºèº«ä»½æˆæƒçš„â€œåç«¯â€ä»£ç ã€‚
æˆ‘ä»¬çŸ¥é“ UT æ˜¯è¿™æ ·ä½¿ç”¨çš„ï¼š &amp;hellip;">
  
  

  
  



<link id="highlightjsThemeDay"
    href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/github.min.css'
    rel='stylesheet' type='text/css' />
<link id="highlightjsThemeNight"
    href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/vs2015.min.css'
    rel='stylesheet' type='text/css' />
<script src='//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js'>
</script>


  <link rel="icon" type="image/x-icon" href="/zsdycs_favicon.ico">
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/fonts.css" />
  <script async src="/js/load-typekit.js"></script>
<script src="/js/get-url-relative-path.js"></script>
<link rel="stylesheet" href="/css/custom.css" />
<link rel="stylesheet" href="/css/loading.css" />
<link rel="stylesheet" id="darkmodeCSS" href="/css/darkmode.css" />

</head>



<body class="blog">

  <main class="paramount">
    
    <header class="masthead">
      <nav class="menu">
  <ul>
    
    
    <li><a href="/">è¿”å›</a></li>
      
    <li><a href="/blog/">åšå®¢</a></li>
      
    <li><a href="/food/">ç¾é£Ÿ</a></li>
      
      <li><a id="darkmodeTag"></a></li>
      





<li>
  <a href="http://github.com/zsdycs/lipk.org/edit/master/content/blog/2020-06-08-Run-utterances.md" title="ç¼–è¾‘æœ¬é¡µ"
    target="_blank">
    ç¼–è¾‘
  </a>
</li>
<li>
  <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" title="ç‰ˆæƒå£°æ˜" target="_blank">
    ç‰ˆæƒ
  </a>
</li>



  </ul>
</nav>
    </header>
    <article class="main">
      
      <header class="title">
        

<h1>è¿è¡Œ Utterances çš„è¯¦ç»†æ•™ç¨‹</h1>

<h3>
     
    æé¹å¤ / 2020-06-08
</h3>
<hr>


      </header>

    


<blockquote>
<p>åº” <a href="https://github.com/aixiu">@aixiu</a> éœ€è¦æœ¬æ•™ç¨‹ï¼Œæœ¬æ–‡å°†ä» Utterances æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼›å¦‚ä½•åœ¨æœ¬åœ°åŠç”Ÿäº§ç¯å¢ƒè¿è¡Œï¼›èº«ä»½æˆæƒ oauth ä»£ç é…ç½®åŠè¿è¡Œã€‚
è¿™ 3 ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚åŒç†ï¼Œæœ¬æ–‡é€‚ç”¨äº <a href="http://beaudar.lipk.org">Beaudar(è¡¨è¾¾)</a></p>
</blockquote>
<h2 id="utterances-æ˜¯å¦‚ä½•å·¥ä½œçš„">Utterances æ˜¯å¦‚ä½•å·¥ä½œçš„</h2>
<p>Utterancesï¼ˆä¸‹é¢ç®€ç§°â€œUTâ€ï¼‰æœ‰ä¸¤ä»½ä»£ç ï¼Œä¸€ä»½æ˜¯æä¾› client.js çš„å‰ç«¯ä»£ç ï¼Œä¸€ä»½æ˜¯ç”¨äºèº«ä»½æˆæƒçš„â€œåç«¯â€ä»£ç ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ UT æ˜¯è¿™æ ·ä½¿ç”¨çš„ï¼š</p>
<pre><code class="language-html">&lt;script src=&quot;https://utteranc.es/client.js&quot;
        repo=&quot;[ENTER REPO HERE]&quot;
        issue-term=&quot;pathname&quot;
        theme=&quot;github-light&quot;
        crossorigin=&quot;anonymous&quot;
        async&gt;
&lt;/script&gt;
</code></pre>
<p>è¿™é‡Œæ˜¯åœ¨è¯·æ±‚ client.jsï¼Œç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨æ§åˆ¶å°æˆ–æºä»£ç å¯ä»¥çœ‹å‡ºï¼Œclient.js ä¼šå»è¯·æ±‚ <code>api.github.com</code> å’Œ <code>api.utteranc.es</code>ã€‚
è¯·æ±‚ <code>api.github.com</code> æ˜¯è·å¾— issue çš„å†…å®¹ï¼Œè¿™ä¸ªæ˜¯å…¬å¼€çš„ï¼Œæ— éœ€æˆæƒã€‚è€Œ <code>api.utteranc.es</code> æ˜¯ç¬¬äºŒä»½ä»£ç å®ç°çš„ï¼Œç”¨äºæˆæƒç™»å½•å’Œè¯„è®ºï¼Œæ˜¯å‰ç«¯ä»£ç ä¸ GitHub èº«ä»½è®¤è¯çš„æ¡¥æ¢ã€‚</p>
<p>ç™»å½•å’Œè¯„è®ºçš„å®ç°ã€‚åœ¨ç™»å½•æ—¶ï¼Œä¼šé€šè¿‡è¯·æ±‚ <code>api.utteranc.es</code> ç„¶åè·³è½¬åˆ° UT çš„ GitHub App è¿›è¡Œæˆæƒï¼Œç™»å½•åâ€œåç«¯â€ä»£ç ä¼šè¿”å›ä¸€ä¸ª tokenã€‚å½“ç”¨æˆ·è¿›è¡Œè¯„è®ºæ—¶ï¼Œå‰ç«¯ä¼šæ‹¿ç€è¿™ä¸ª token å»è¯·æ±‚ <code>api.github.com</code>ï¼Œè¿™æ—¶ï¼ŒUT ä¼šé€šè¿‡æŒ‡å®šçš„ç”¨æˆ· <a href="https://github.com/utterances-bot">utterances-bot</a> åˆ›å»º issueã€‚</p>
<p>è¿™æ ·ä¸‹æ¥ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œé™¤äº†è¦æœ‰ <a href="https://github.com/utterance/utterances">utterance/utterances</a> å’Œ <a href="https://github.com/utterance/utterances-oauth">utterance/utterances-oauth</a> è¿™ä¸¤ä»½ä»£ç ï¼Œè¿˜è¦æœ‰ä¸€ä¸ª GitHub app å’Œä¸€ä¸ªç”¨äºåˆ›å»º issue çš„ç”¨æˆ·ã€‚</p>
<h2 id="å¦‚ä½•åœ¨æœ¬åœ°åŠç”Ÿäº§ç¯å¢ƒè¿è¡Œ">å¦‚ä½•åœ¨æœ¬åœ°åŠç”Ÿäº§ç¯å¢ƒè¿è¡Œ</h2>
<h3 id="æœ¬åœ°è¿è¡Œè°ƒè¯•">æœ¬åœ°è¿è¡Œè°ƒè¯•</h3>
<p>åŸºæœ¬çš„æ“ä½œå¯ä»¥å‚è€ƒ <a href="https://github.com/utterance/utterances/blob/master/CONTRIBUTING.md">UT çš„è´¡çŒ®æ–‡æ¡£</a> æˆ–ç¿»è¯‘åçš„ <a href="https://github.com/beaudar/beaudar/blob/master/CONTRIBUTING.MD">Beaudar çš„è´¡çŒ®æ–‡æ¡£</a>ã€‚</p>
<p>å…³äº host é‡å®šå‘çš„æ“ä½œå¯ä»¥åœ¨ <a href="https://lipk.org/blog/2020/06/08/beauder-qa/">è¿™ä¸ªå¸®åŠ©æ–‡æ¡£</a>ï¼Œæ‰¾åˆ°è®¾ç½®çš„æ‰‹é¡ºã€‚</p>
<p>åœ¨æœ¬åœ°è¿è¡Œçš„æ—¶å€™ï¼Œå¦‚æœä½ åœ¨æœ¬åœ°è¿è¡Œå¼•ç”¨ UT çš„ç«™ç‚¹ï¼Œä¹Ÿæ˜¯å¯ä»¥é€šè¿‡è¯·æ±‚ <code>http://localhost:4000/client.js</code> ä½¿ç”¨çš„ã€‚å› ä¸º UT çš„åç«¯ï¼Œâ€œORIGINSâ€ æ¥æºè®¾ç½®äº†å…è®¸æ¥è‡ªæœ¬åœ°çš„è¯·æ±‚ã€‚</p>
<h3 id="ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²">ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</h3>
<p>UT æ˜¯åŸºäº node çš„ï¼Œåœ¨ package.json ä¸­ï¼Œæœ‰å…³äºéƒ¨ç½²çš„å‘½ä»¤ï¼Œpredeployï¼ˆé¢„éƒ¨ç½²ï¼‰ä¸ deployï¼ˆéƒ¨ç½²ï¼‰ï¼Œå¯ä»¥çœ‹å‡ºï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„æ˜¯ <code>/dist</code> æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ã€‚
åœ¨é¢„éƒ¨ç½²æ—¶æ˜¯åœ¨ buildï¼ˆæ„å»º/ç¼–è¯‘ï¼‰ä»£ç ï¼Œå¹¶ç”Ÿæˆ <code>/dist/CNAME</code> æ–‡ä»¶ï¼ŒCNAME æ˜¯å°†ç«™ç‚¹æ‰˜ç®¡åˆ° GitHub ç»‘å®šè‡ªå®šä¹‰åŸŸåçš„å¿…é¡»æ–‡ä»¶ï¼Œè¯¦æƒ…å¯åˆ° <a href="https://help.github.com/cn/github/working-with-github-pages/configuring-a-custom-domain-for-your-github-pages-site">github è‡ªå®šä¹‰åŸŸ</a>ã€‚</p>
<p>éƒ¨ç½²æ—¶æ˜¯åœ¨ä½¿ç”¨ <a href="https://www.npmjs.com/package/gh-pages">gh-pages</a> è¿™ä¸ªæ’ä»¶ï¼Œå°† <code>/dist</code> çš„å†…å®¹ push åˆ° gh-pages åˆ†æ”¯ï¼Œä¸ºä»€ä¹ˆè¦æ”¾åˆ°è¿™ä¸ªå¥‡æ€ªçš„åˆ†æ”¯ä¸‹ï¼Ÿå¯ä»¥åœ¨ <a href="https://help.github.com/cn/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site">github é…ç½®å‘å¸ƒæº</a>ï¼Œå¾—åˆ°è§£ç­”ï¼Œä½ å®Œå…¨å¯ä»¥é…ç½® <a href="https://parceljs.org/">parcel</a> å°†é»˜è®¤çš„æ‰“åŒ…è¾“å‡ºæ–‡ä»¶å¤¹ <code>/dist</code> æ”¹ä¸º <code>/docs</code>ï¼Œä½¿ç”¨ <code>/docs</code> ä¸‹çš„æ–‡ä»¶ä½œä¸ºå‘å¸ƒæºã€‚</p>
<h2 id="èº«ä»½æˆæƒä»£ç çš„é…ç½®åŠè¿è¡Œ">èº«ä»½æˆæƒä»£ç çš„é…ç½®åŠè¿è¡Œ</h2>
<p><a href="https://github.com/utterance/utterances-oauth">utterance/utterances-oauth</a> è¿™ä»½ä»£ç ä½¿ç”¨çš„æ˜¯è¯¥ä½œè€…ç»´æŠ¤çš„ <a href="https://github.com/cfworker/cfworker">cfworker</a>ï¼Œåœ¨æŸ¥çœ‹è¯¥åº“çš„èµ„æ–™æ—¶çœ‹åˆ°äº†<a href="https://github.com/cfworker/cfworker/issues/31">ä¸€ä¸ªæœ‰è¶£çš„ issue</a>ï¼Œè®©æˆ‘å¯¹ <a href="https://deno.land/">Deno</a> çš„æœªæ¥å¢åŠ æœŸå¾…äº†ã€‚</p>
<h3 id="é…ç½®ä¸è¿è¡Œ">é…ç½®ä¸è¿è¡Œ</h3>
<p>æˆ‘ä»¬éœ€è¦åœ¨æ ¹ç›®å½•å»ºç«‹ä¸€ä¸ª <code>.env</code> æ–‡ä»¶ï¼Œå…·ä½“è¯´æ˜å¯ä»¥åœ¨ <a href="https://github.com/beaudar/beaudar-oauth">beaudar-oauth çš„è¯´æ˜æ–‡æ¡£</a> æŸ¥çœ‹ã€‚
åœ¨æœ¬åœ°è¿è¡Œå¯èƒ½ä¼šå‡ºé”™ï¼Œéœ€è¦åœ¨ sh ä¸‹è¿è¡Œã€‚å¯ä»¥ç”¨ git è‡ªå¸¦çš„ shã€‚å¦‚æœä½ å·²ç»å®‰è£…äº† gitï¼Œåªè¦å°† <code>C:\Program Files\Git\bin</code> æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œå‘½ä»¤è¡Œæ‰§è¡Œ <code>sh</code>ï¼Œå°±å¯è¿›å…¥ shï¼Œè¿™æ—¶å¯ä»¥ç›´æ¥æ‰§è¡Œ <code>cfworker run --watch --inspect src/index.ts</code> æ¥å¯åŠ¨ç¨‹åºã€‚</p>
<p>å…¶å®è¿™ä»½ä»£ç ä¸éœ€è¦åœ¨æœ¬åœ°è°ƒè¯•ï¼Œæˆ‘ä»¬åªéœ€è¦å°† build åçš„ <code>src/index.ts</code> æ”¾åˆ° <a href="http://cloudflare.com">cloudflare</a> çš„ worker ä¸­å°±å¯ä»¥äº†ã€‚</p>
<p>éœ€è¦ç”¨åˆ° <a href="http://cloudflare.com">cloudflare</a> ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ éœ€è¦ç”³è¯·ä¸€ä¸ªåŸŸåäº†ã€‚æ·»åŠ  worker çš„å…·ä½“æ“ä½œå°±ä¸è¯¦ç»†è¯´æ˜äº†ï¼Œåªéœ€è¦é…ç½®ä¸€ä¸ªè¿è¡Œçš„è·¯ç”±ï¼ŒBeaudar ä½¿ç”¨çš„è·¯ç”±æ˜¯ <code>api.lipk.org</code>ï¼Œworker åç§°æ˜¯ beaudarã€‚</p>

      <footer>
      
  
  <div id="eof">
    <span>EOF</span>
  </div>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/blog/2020/05/31/how-to-use-beaudar/" title="ä½ å¯ä»¥ä½¿ç”¨æ–¹å‘é”®">ä½¿ç”¨è¯„è®ºæ’ä»¶ Beaudar</a></span>
  <span class="nav-next"><a href="/blog/2020/06/08/beauder-qa/" title="ä½ å¯ä»¥ä½¿ç”¨æ–¹å‘é”®">å…³äº Beaudar çš„ Q&amp;A</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/blog\/2020\/05\/31\/how-to-use-beaudar\/';
    
  } else if (e.which == 39) {  
    
    url = '\/blog\/2020\/06\/08\/beauder-qa\/';
    
  }
  if (url) window.location = url;
});
</script>



<section id="beaudar" class="comments">
  <div id="loading">
    <div class="container animation-2">
      <div class="shape shape1"></div>
      <div class="shape shape2"></div>
      <div class="shape shape3"></div>
      <div class="shape shape4"></div>
    </div>
  </div>
</section>


<script async src="/js/indentation-p.js"></script>

<script async src="/js/darkmode.js"></script>

<script async src="/js/beaudar.js"></script>

<script async src="/js/fix-toc.js"></script>

<script async src="/js/math-code.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/external-link.js"></script>

<script async src="/js/alt-title.js"></script>






<script async src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script>



<script>hljs.configure({ languages: [] }); hljs.initHighlightingOnLoad();</script>





      
      <hr>
      <div class="copyright">
        <span class="slogan">æ‰§æ‰‹ç›¸çœ‹ï¼Œå¯¹å½±æˆåŒ</span>
        Â© 2018 - 2020 <a href="/">æ‰§æ‰‹å¯¹å½±æˆåŒ</a>
        <a href="https://travellings.now.sh/" target="blank" title="å¼€å¾€-å‹é“¾æ¥åŠ›">
          <img src="/images/travellings.svg" alt="å¼€å¾€-å‹é“¾æ¥åŠ›" height="23" style="vertical-align: text-top;">
        </a>
      </div>
      
      </footer>
  
    </article>
  </main>
  
</body>
</html>
